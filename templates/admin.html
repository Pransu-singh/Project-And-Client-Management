<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Real Trust</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* Admin Specific Styles */
        body.admin-body {
            background-color: #f4f4f4;
            padding: 20px;
        }
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .admin-header {
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .admin-nav {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        .admin-nav button {
            background: none;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
        }
        .admin-nav button.active {
            color: #007bff;
            border-bottom: 3px solid #007bff;
        }
        .admin-section {
            display: none;
        }
        .admin-section.active {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .table th, .table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        .table th {
            background-color: #f8f9fa;
        }
        .thumbnail {
            width: 50px;
            height: 50px;
            object-fit: cover;
        }
        .btn-delete {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
        }
    </style>
</head>
<body class="admin-body">

    <div class="admin-container">
        <div class="admin-header">
            <h1>Admin Panel</h1>
            <div>
                <a href="/" class="btn btn-outline" style="margin-right: 10px;">View Website</a>
                <a href="/admin/logout" class="btn btn-delete">Logout</a>
            </div>
        </div>

        <div class="admin-nav">
            <button class="active" onclick="showSection('projects')">Projects</button>
            <button onclick="showSection('clients')">Clients</button>
            <button onclick="showSection('contacts')">Contact Responses</button>
            <button onclick="showSection('subscribers')">Subscribers</button>
        </div>

        <!-- Projects Section -->
        <div id="projects" class="admin-section active">
            <h2>Manage Projects</h2>
            <div style="margin-bottom: 30px; background: #f9f9f9; padding: 20px; border-radius: 5px;">
                <h3>Add New Project</h3>
                <form action="/admin/add_project" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label>Project Name</label>
                        <input type="text" name="name" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea name="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Project Image (Will be cropped to 450x350)</label>
                        <input type="file" name="image" accept="image/*" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Project</button>
                </form>
            </div>

            <h3>Existing Projects</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for project in projects %}
                    <tr>
                        <td><img src="{{ url_for('static', filename='uploads/' + project.image_file) }}" class="thumbnail"></td>
                        <td>{{ project.name }}</td>
                        <td>{{ project.description }}</td>
                        <td><a href="/admin/delete_project/{{ project.id }}" class="btn-delete" onclick="return confirm('Are you sure?')">Delete</a></td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4">No projects found.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Clients Section -->
        <div id="clients" class="admin-section">
            <h2>Manage Clients</h2>
            <div style="margin-bottom: 30px; background: #f9f9f9; padding: 20px; border-radius: 5px;">
                <h3>Add New Client</h3>
                <form action="/admin/add_client" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label>Client Name</label>
                        <input type="text" name="name" required>
                    </div>
                    <div class="form-group">
                        <label>Designation (e.g. CEO, Web Developer)</label>
                        <input type="text" name="designation" required>
                    </div>
                    <div class="form-group">
                        <label>Description (Testimonial)</label>
                        <textarea name="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Client Image (Will be cropped to 200x200)</label>
                        <input type="file" name="image" accept="image/*" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Client</button>
                </form>
            </div>

            <h3>Existing Clients</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Designation</th>
                        <th>Description</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for client in clients %}
                    <tr>
                        <td><img src="{{ url_for('static', filename='uploads/' + client.image_file) }}" class="thumbnail"></td>
                        <td>{{ client.name }}</td>
                        <td>{{ client.designation }}</td>
                        <td>{{ client.description }}</td>
                        <td><a href="/admin/delete_client/{{ client.id }}" class="btn-delete" onclick="return confirm('Are you sure?')">Delete</a></td>
                    </tr>
                    {% else %}
                    <tr><td colspan="5">No clients found.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Contacts Section -->
        <div id="contacts" class="admin-section">
            <h2>Contact Form Responses</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Mobile</th>
                        <th>City</th>
                    </tr>
                </thead>
                <tbody>
                    {% for contact in contacts %}
                    <tr>
                        <td>{{ contact.id }}</td>
                        <td>{{ contact.full_name }}</td>
                        <td>{{ contact.email }}</td>
                        <td>{{ contact.mobile }}</td>
                        <td>{{ contact.city }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="5">No contact responses yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Subscribers Section -->
        <div id="subscribers" class="admin-section">
            <h2>Subscribed Email Addresses</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Email Address</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sub in subscribers %}
                    <tr>
                        <td>{{ sub.id }}</td>
                        <td>{{ sub.email }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="2">No subscribers yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(sec => sec.classList.remove('active'));
            // Remove active class from buttons
            document.querySelectorAll('.admin-nav button').forEach(btn => btn.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            // Set button active
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
